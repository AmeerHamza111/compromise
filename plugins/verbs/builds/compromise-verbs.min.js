!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).nlp=t()}(this,(function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var i=function(e){return{adverb:e.match("#Adverb+"),negative:e.match("#Negative"),auxiliary:e.match("#Auxiliary").not("(#Negative|#Adverb)"),particle:e.match("#Particle"),verb:e.match("#Verb").not("(#Adverb|#Negative|#Auxiliary|#Particle)")}},o=function(e,t){var n=e.verb,r=n.out("normal");if(n.has("#Infinitive"))return r;var i=null;return n.has("#PastTense")?i="PastTense":n.has("#Gerund")?i="Gerund":n.has("#PresentTense")?i="PresentTense":n.has("#Participle")?i="Participle":n.has("#Actor")&&(i="Actor"),t.transforms.toInfinitive(r,t,i)},a=function(e){var t=e.verb;if(t.has("(are|were|does)")||e.auxiliary.has("(are|were|does)"))return!0;if(t.has("(is|am|do|was)")||e.auxiliary.has("(is|am|do|was)"))return!1;var n=function(e){return e.lookBehind("#Noun+").last()}(t);return!!n.has("(we|they|you)")||(!!n.has("#Plural")||!n.has("#Singular")&&null)},u=function(e){var t=a(e),n=e.negative.found,r={PastTense:"was",PresentTense:"is",FutureTense:"will be",Infinitive:"is",Gerund:"being",Actor:"",PerfectTense:"been",Pluperfect:"been"};return t&&(r.PastTense="were",r.PresentTense="are",r.Infinitive="are"),n&&(r.PastTense+=" not",r.PresentTense+=" not",r.FutureTense="will not be",r.Infinitive+=" not",r.PerfectTense="not "+r.PerfectTense,r.Pluperfect="not "+r.Pluperfect,r.Gerund="not "+r.Gerund),r},s=function(e,t){var n=e.verb;if(n.has("#Copula")||"be"===n.out("normal")&&e.auxiliary.has("will"))return u(e);var r=o(e,t),i=t.transforms.conjugate(r,t);i.Infinitive=r;var a=e.negative.found;return a&&(i.PastTense="did not "+i.Infinitive,i.PresentTense="does not "+i.Infinitive,i.Gerund="not "+i.Gerund),i.FutureTense||(i.FutureTense=a?"will not "+i.Infinitive:"will "+i.Infinitive),a&&(i.Infinitive="not "+i.Infinitive),i},f=function(e,t){var n=e.verb;if(!e.negative.found)if(e.auxiliary.found)e.auxiliary.eq(0).append("not");else if(n.has("(#Copula|will|has|had|do)"))n.append("not");else{if(n.has("#PastTense")){var r=o(e,t);return n.replace(r),void n.prepend("did not")}if(n.has("#PresentTense")){var i=o(e,t);return n.replace(i),void(a(e)?n.prepend("do not"):n.prepend("does not"))}if(n.has("#Gerund")){var u=o(e,t);return n.replace(u),void n.prepend("not")}a(e)?n.prepend("does not"):n.prepend("do not")}},c=[{isNegative:function(){return this.if("#Negative")},isPositive:function(){return this.ifNo("#Negative")},toNegative:function(){var e=this;return this.list.forEach((function(t){var n=e.buildFrom([t]),r=i(n);f(r,n.world)})),this},toPositive:function(){return this.remove("#Negative")}},{isPlural:function(){var e=this,t=[];return this.forEach((function(n){var r=i(n);!0===a(r,e.world)&&t.push(n.list[0])})),this.buildFrom(t)},isSingular:function(){var e=this,t=[];return this.forEach((function(n){var r=i(n);!1===a(r,e.world)&&t.push(n.list[0])})),this.buildFrom(t)}},{conjugate:function(){var e=this,t=[];return this.forEach((function(n){var r=i(n),o=s(r,e.world);t.push(o)})),t},toPastTense:function(){var e=this;return this.forEach((function(t){var n=i(t),r=s(n,e.world).PastTense;t.replace(r)})),this},toPresentTense:function(){var e=this;return this.forEach((function(t){var n=i(t),r=s(n,e.world).PresentTense;t.replace(r)})),this},toFutureTense:function(){var e=this;return this.forEach((function(t){var n=i(t),r=o(n,e.world);t.replace("will "+r)})),this},toInfinitive:function(){var e=this;return this.forEach((function(t){var n=i(t),r=o(n,e.world);t.replace(r)})),this},toGerund:function(){var e=this;return this.forEach((function(t){var n=i(t),r=s(n,e.world).Gerund;t.replace(r)})),this}}];return function(o){var a=function(o){function a(e,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r(this,t(a).call(this,e,n,i))}var u,f,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(a,o),u=a,(f=[{key:"json",value:function(e){var t=this,n=null;"number"==typeof e&&(n=e,e=null),e=e||{text:!0,normal:!0,trim:!0,terms:!0};var r=[];return this.forEach((function(n){var o=n.json(e)[0],a=i(n);o.parts={},Object.keys(a).forEach((function(e){o.parts[e]=a[e].text("normal")})),o.isNegative=n.has("#Negative"),o.conjugations=s(a,t.world),r.push(o)})),null!==n?r[n]:r}},{key:"adverbs",value:function(){var e=[];return this.forEach((function(t){var n=i(t).adverb;n.found&&(e=e.concat(n.list))})),this.buildFrom(e)}}])&&e(u.prototype,f),c&&e(u,c),a}(o);return c.forEach((function(e){return Object.assign(a.prototype,e)})),a.prototype.negate=a.prototype.toNegative,o.prototype.verbs=function(e){var t=this.match("(#Adverb|#Auxiliary|#Verb|#Negative|#Particle)+");return t=(t=t.splitAfter("@hasComma")).if("#Verb"),"number"==typeof e&&(t=t.get(e)),new a(t.list,this,this.world)},o}}));
