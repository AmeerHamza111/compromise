!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).nlp=t()}(this,(function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var i=function(e){for(var t=[{reg:/^(minus|negative)[\s\-]/i,mult:-1},{reg:/^(a\s)?half[\s\-](of\s)?/i,mult:.5}],n=0;n<t.length;n++)if(!0===t[n].reg.test(e))return{amount:t[n].mult,str:e.replace(t[n].reg,"")};return{amount:1,str:e}},u={ones:{zeroth:0,first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9},teens:{tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19},tens:{twentieth:20,thirtieth:30,fortieth:40,fourtieth:40,fiftieth:50,sixtieth:60,seventieth:70,eightieth:80,ninetieth:90,twenty:20,thirty:30,forty:40,fourty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90},multiples:{hundredth:100,thousandth:1e3,millionth:1e6,billionth:1e9,trillionth:1e12,quadrillionth:1e15,quintillionth:1e18,sextillionth:1e21,septillionth:1e24,hundred:100,thousand:1e3,million:1e6,billion:1e9,trillion:1e12,quadrillion:1e15,quintillion:1e18,sextillion:1e21,septillion:1e24,grand:1e3}},a=function(e,t){if(u.ones.hasOwnProperty(e)){if(t.ones||t.teens)return!1}else if(u.teens.hasOwnProperty(e)){if(t.ones||t.teens||t.tens)return!1}else if(u.tens.hasOwnProperty(e)&&(t.ones||t.teens||t.tens))return!1;return!0},o=function(e){for(var t="0.",n=0;n<e.length;n++){var r=e[n];if(!0===u.ones.hasOwnProperty(r))t+=u.ones[r];else if(!0===u.teens.hasOwnProperty(r))t+=u.teens[r];else if(!0===u.tens.hasOwnProperty(r))t+=u.tens[r];else{if(!0!==/^[0-9]$/.test(r))return 0;t+=r}}return parseFloat(t)},l=function(e){return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/1st$/,"1")).replace(/2nd$/,"2")).replace(/3rd$/,"3")).replace(/([4567890])r?th$/,"$1")).replace(/^[$€¥£¢]/,"")).replace(/[%$€¥£¢]$/,"")).replace(/,/g,"")).replace(/([0-9])([a-z\u00C0-\u00FF]{1,2})$/,"$1")},s=/^([0-9,\. ]+)\/([0-9,\. ]+)$/,h={"a couple":2,"a dozen":12,"two dozen":24,zero:0},f=function(e){return Object.keys(e).reduce((function(t,n){return t+=e[n]}),0)},c=function(e){if(!0===h.hasOwnProperty(e))return h[e];if("a"===e||"an"===e)return 1;for(var t=i(e),n=null,r={},c=0,p=!1,v=(e=t.str).split(/[ -]/),d=0;d<v.length;d++){var y=v[d];if((y=l(y))&&"and"!==y)if("-"!==y&&"negative"!==y){if("-"===y.charAt(0)&&(p=!0,y=y.substr(1)),"point"===y)return c+=f(r),c+=o(v.slice(d+1,v.length)),c*=t.amount;var m=y.match(s);if(m){var g=parseFloat(m[1].replace(/[, ]/g,"")),w=parseFloat(m[2].replace(/[, ]/g,""));w&&(c+=g/w||0)}else{if(!1===a(y,r))return null;if(/^[0-9\.]+$/.test(y))r.ones=parseFloat(y);else if(!0===u.ones.hasOwnProperty(y))r.ones=u.ones[y];else if(!0===u.teens.hasOwnProperty(y))r.teens=u.teens[y];else if(!0===u.tens.hasOwnProperty(y))r.tens=u.tens[y];else if(!0===u.multiples.hasOwnProperty(y)){var O=u.multiples[y];if(O===n)return null;if(100===O&&void 0!==v[d+1]){var b=v[d+1];u.multiples[b]&&(O*=u.multiples[b],d+=1)}null===n||O<n?(c+=(f(r)||1)*O,n=O,r={}):(n=O,c=((c+=f(r))||1)*O,r={})}}}else p=!0}return c+=f(r),c*=t.amount,0===(c*=p?-1:1)&&0===Object.keys(r).length?null:c},p=function(e){if(e<1e6)return String(e);var t=e.toFixed(0);return-1===t.indexOf("e+")?t:t.replace(".","").split("e+").reduce((function(e,t){return e+Array(t-e.length+2).join(0)}))},v=[["ninety",90],["eighty",80],["seventy",70],["sixty",60],["fifty",50],["forty",40],["thirty",30],["twenty",20]],d=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],y=[[1e24,"septillion"],[1e21,"sextillion"],[1e18,"quintillion"],[1e15,"quadrillion"],[1e12,"trillion"],[1e9,"billion"],[1e8,"hundred million"],[1e6,"million"],[1e5,"hundred thousand"],[1e3,"thousand"],[100,"hundred"],[1,"one"]],m=function(e){var t=[];if(e>100)return t;for(var n=0;n<v.length;n++)e>=v[n][1]&&(e-=v[n][1],t.push(v[n][0]));return d[e]&&t.push(d[e]),t},g=function(e){if(e>1e21)return String(e);var t=[];e<0&&(t.push("negative"),e=Math.abs(e));for(var n=function(e){var t=e,n=[];return y.forEach((function(r){if(e>=r[0]){var i=Math.floor(t/r[0]);t-=i*r[0],i&&n.push({unit:r[1],count:i})}})),n}(e),r=0;r<n.length;r++){var i=n[r].unit;"one"===i&&(i="",t.length>1&&t.push("and")),(t=t.concat(m(n[r].count))).push(i)}return 0===(t=(t=t.concat(function(e){var t=["zero","one","two","three","four","five","six","seven","eight","nine"],n=[],r=p(e).match(/\.([0-9]+)/);if(!r||!r[0])return n;n.push("point");for(var i=r[0].split(""),u=0;u<i.length;u++)n.push(t[i[u]]);return n}(e))).filter((function(e){return e}))).length&&(t[0]=""),t.join(" ")},w="twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety|fourty",O=function(e,t){var n=e.match("#Value+ #Unit?");if(n.has("#NumericValue #NumericValue")&&(n.has("#Value #Comma #Value")?n.splitAfter("#Comma"):n.splitAfter("#NumericValue")),n.has("#Value #Value #Value")&&!n.has("#Multiple")&&n.has("("+w+") #Cardinal #Cardinal")&&n.splitAfter("("+w+") #Cardinal"),n.has("#Value #Value")){n.has("#NumericValue #NumericValue")&&n.splitOn("#Year"),n.has("("+w+") (eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen)")&&n.splitAfter("("+w+")");var r=n.match("#Cardinal #Cardinal");r.found&&!n.has("(point|decimal)")&&(r.has("#Cardinal (#Multiple|point|decimal)")||r.has("("+w+") #Cardinal")||r.has("#Multiple #Value")||n.splitAfter(r.terms(0).out("normal"))),n.match("#Ordinal #Ordinal").match("#TextValue").found&&!n.has("#Multiple")&&(n.has("("+w+") #Ordinal")||n.splitAfter("#Ordinal")),n.has("#Ordinal #Cardinal")&&n.splitBefore("#Cardinal+"),n.has("#TextValue #NumericValue")&&!n.has("("+w+"|#Multiple)")&&n.splitBefore("#NumericValue+")}return n.has("#NumberRange")&&n.splitAfter("#NumberRange"),"number"==typeof t&&(n=n.get(t)),n},b=function(e){if(!e&&0!==e)return null;var t=e%100;if(t>10&&t<20)return String(e)+"th";var n={0:"th",1:"st",2:"nd",3:"rd"},r=p(e),i=r.slice(r.length-1,r.length);return r+=n[i]?n[i]:"th"},x={one:"first",two:"second",three:"third",five:"fifth",eight:"eighth",nine:"ninth",twelve:"twelfth",twenty:"twentieth",thirty:"thirtieth",forty:"fortieth",fourty:"fourtieth",fifty:"fiftieth",sixty:"sixtieth",seventy:"seventieth",eighty:"eightieth",ninety:"ninetieth"},V=function(e){var t=g(e).split(" "),n=t[t.length-1];return x.hasOwnProperty(n)?t[t.length-1]=x[n]:t[t.length-1]=n.replace(/y$/,"i")+"th",t.join(" ")},C=function(e,t,n){var r=String(e.num);if(t)r=n?V(r):g(r);else if(n)return b(r);return"".concat(e.prefix||"").concat(r).concat(e.suffix||"")},P=function(e){var t=e.root(),n=t.split(/^([^0-9]*)([0-9]*)([^0-9]*)$/);if(n[2]){var r=parseFloat(n[2]||t);return"number"!=typeof r&&(r=null),{prefix:n[1]||"",num:r,suffix:n[3]||""}}return{prefix:"",num:c(t),suffix:""}};return function(i){var u=function(i){function u(e,n,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(a=r(this,t(u).call(this,e,n,i))).unit=a.match("#Unit+$");var o=a.not("#Unit+$");return a.list=o.list,a}var a,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(u,i),a=u,(o=[{key:"isOrdinal",value:function(){return this.if("#Ordinal")}},{key:"isCardinal",value:function(){return this.if("#Cardinal")}},{key:"toNumber",value:function(){var e=this;return this.forEach((function(t){var n=P(t),r=C(n,!1,t.has("#Ordinal"));e.replaceWith(r)})),this}},{key:"toText",value:function(){var e=this;return this.forEach((function(t){var n=P(t),r=C(n,!0,t.has("#Ordinal"));e.replaceWith(r)})),this}},{key:"toCardinal",value:function(){var e=this;return this.if("#Ordinal").forEach((function(t){var n=P(t),r=C(n,t.has("#TextNumber"),!1);e.replaceWith(r)})),this}},{key:"toOrdinal",value:function(){var e=this;return this.if("#Cardinal").forEach((function(t){var n=P(t),r=C(n,t.has("#TextNumber"),!0);e.replaceWith(r)})),this}},{key:"greaterThan",value:function(e){return this.filter((function(t){return P(t).num>e}))}},{key:"add",value:function(e){return e?this.map((function(t){var n=P(t);n.num+=e;var r=C(n,t.has("#TextNumber"),t.has("#Ordinal"));return t.replaceWith(r)})):this}},{key:"subtract",value:function(e){return this.add(-1*e)}},{key:"increment",value:function(){this.add(1)}},{key:"decrement",value:function(){this.add(-1)}}])&&e(a.prototype,o),l&&e(a,l),u}(i);return u.prototype.plus=u.prototype.add,u.prototype.minus=u.prototype.subtract,i.prototype.numbers=function(e){var t=O(this,e);return new u(t.list,this,this.world)},i.prototype.values=i.prototype.numbers,i}}));
