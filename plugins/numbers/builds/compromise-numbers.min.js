!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).nlp=t()}(this,(function(){"use strict";function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function t(e,n){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,n)}function n(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var i="twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety|fourty",r=function(e,t){var n=e.match("#Value+ #Unit?");if(n.has("#NumericValue #NumericValue")&&(n.has("#Value @hasComma #Value")?n.splitAfter("@hasComma"):n=n.splitAfter("#NumericValue")),n.has("#Value #Value #Value")&&!n.has("#Multiple")&&n.has("("+i+") #Cardinal #Cardinal")&&(n=n.splitAfter("("+i+") #Cardinal")),n.has("#Value #Value")){n.has("#NumericValue #NumericValue")&&(n=n.splitOn("#Year")),n.has("("+i+") (eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen)")&&(n=n.splitAfter("("+i+")"));var r=n.match("#Cardinal #Cardinal");r.found&&!n.has("(point|decimal)")&&(r.has("#Cardinal (#Multiple|point|decimal)")||r.has("("+i+") #Cardinal")||r.has("#Multiple #Value")||r.terms().forEach((function(e){n=n.splitOn(e)}))),n.match("#Ordinal #Ordinal").match("#TextValue").found&&!n.has("#Multiple")&&(n.has("("+i+") #Ordinal")||(n=n.splitAfter("#Ordinal"))),n.has("#Ordinal #Cardinal")&&(n=n.splitBefore("#Cardinal+")),n.has("#TextValue #NumericValue")&&!n.has("("+i+"|#Multiple)")&&(n=n.splitBefore("#NumericValue+"))}return n.has("#NumberRange")&&(n=n.splitAfter("#NumberRange")),"number"==typeof t&&(n=n.get(t)),n},u=function(e){for(var t=[{reg:/^(minus|negative)[\s\-]/i,mult:-1},{reg:/^(a\s)?half[\s\-](of\s)?/i,mult:.5}],n=0;n<t.length;n++)if(!0===t[n].reg.test(e))return{amount:t[n].mult,str:e.replace(t[n].reg,"")};return{amount:1,str:e}},o={ones:{zeroth:0,first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9},teens:{tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19},tens:{twentieth:20,thirtieth:30,fortieth:40,fourtieth:40,fiftieth:50,sixtieth:60,seventieth:70,eightieth:80,ninetieth:90,twenty:20,thirty:30,forty:40,fourty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90},multiples:{hundredth:100,thousandth:1e3,millionth:1e6,billionth:1e9,trillionth:1e12,quadrillionth:1e15,quintillionth:1e18,sextillionth:1e21,septillionth:1e24,hundred:100,thousand:1e3,million:1e6,billion:1e9,trillion:1e12,quadrillion:1e15,quintillion:1e18,sextillion:1e21,septillion:1e24,grand:1e3}},l=function(e,t){if(o.ones.hasOwnProperty(e)){if(t.ones||t.teens)return!1}else if(o.teens.hasOwnProperty(e)){if(t.ones||t.teens||t.tens)return!1}else if(o.tens.hasOwnProperty(e)&&(t.ones||t.teens||t.tens))return!1;return!0},a=function(e){for(var t="0.",n=0;n<e.length;n++){var i=e[n];if(!0===o.ones.hasOwnProperty(i))t+=o.ones[i];else if(!0===o.teens.hasOwnProperty(i))t+=o.teens[i];else if(!0===o.tens.hasOwnProperty(i))t+=o.tens[i];else{if(!0!==/^[0-9]$/.test(i))return 0;t+=i}}return parseFloat(t)},s=function(e){return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/1st$/,"1")).replace(/2nd$/,"2")).replace(/3rd$/,"3")).replace(/([4567890])r?th$/,"$1")).replace(/^[$€¥£¢]/,"")).replace(/[%$€¥£¢]$/,"")).replace(/,/g,"")).replace(/([0-9])([a-z\u00C0-\u00FF]{1,2})$/,"$1")},f=/^([0-9,\. ]+)\/([0-9,\. ]+)$/,h={"a couple":2,"a dozen":12,"two dozen":24,zero:0},c=function(e){return Object.keys(e).reduce((function(t,n){return t+=e[n]}),0)},p=function(e){if(!0===h.hasOwnProperty(e))return h[e];if("a"===e||"an"===e)return 1;for(var t=u(e),n=null,i={},r=0,p=!1,d=(e=t.str).split(/[ -]/),m=0;m<d.length;m++){var v=d[m];if((v=s(v))&&"and"!==v)if("-"!==v&&"negative"!==v){if("-"===v.charAt(0)&&(p=!0,v=v.substr(1)),"point"===v)return r+=c(i),r+=a(d.slice(m+1,d.length)),r*=t.amount;var y=v.match(f);if(y){var x=parseFloat(y[1].replace(/[, ]/g,"")),g=parseFloat(y[2].replace(/[, ]/g,""));g&&(r+=x/g||0)}else{if(!1===l(v,i))return null;if(/^[0-9\.]+$/.test(v))i.ones=parseFloat(v);else if(!0===o.ones.hasOwnProperty(v))i.ones=o.ones[v];else if(!0===o.teens.hasOwnProperty(v))i.teens=o.teens[v];else if(!0===o.tens.hasOwnProperty(v))i.tens=o.tens[v];else if(!0===o.multiples.hasOwnProperty(v)){var O=o.multiples[v];if(O===n)return null;if(100===O&&void 0!==d[m+1]){var w=d[m+1];o.multiples[w]&&(O*=o.multiples[w],m+=1)}null===n||O<n?(r+=(c(i)||1)*O,n=O,i={}):(n=O,r=((r+=c(i))||1)*O,i={})}}}else p=!0}return r+=c(i),r*=t.amount,0===(r*=p?-1:1)&&0===Object.keys(i).length?null:r},d=function(e){var t=e.text("reduced"),n=t.split(/^([^0-9]*)([0-9.,]*)([^0-9]*)$/);if(n&&n[2]&&e.terms().length<2){var i=parseFloat(n[2]||t);"number"!=typeof i&&(i=null);var r=n[3]||"";return"st"!==r&&"nd"!==r&&"rd"!==r&&"th"!==r||(r=""),"m"!==r&&"M"!==r||(i*=1e6,r=""),"k"!==r&&"k"!==r||(i*=1e3,r=""),{prefix:n[1]||"",num:i,suffix:r}}return{prefix:"",num:p(t),suffix:""}},m=function(e){return e<1e6?String(e):-1===(t="number"==typeof e?e.toFixed(0):e).indexOf("e+")?t:t.replace(".","").split("e+").reduce((function(e,t){return e+Array(t-e.length+2).join(0)}));var t},v=[["ninety",90],["eighty",80],["seventy",70],["sixty",60],["fifty",50],["forty",40],["thirty",30],["twenty",20]],y=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],x=[[1e24,"septillion"],[1e20,"hundred sextillion"],[1e21,"sextillion"],[1e20,"hundred quintillion"],[1e18,"quintillion"],[1e17,"hundred quadrillion"],[1e15,"quadrillion"],[1e14,"hundred trillion"],[1e12,"trillion"],[1e11,"hundred billion"],[1e9,"billion"],[1e8,"hundred million"],[1e6,"million"],[1e5,"hundred thousand"],[1e3,"thousand"],[100,"hundred"],[1,"one"]],g=function(e){var t=[];if(e>100)return t;for(var n=0;n<v.length;n++)e>=v[n][1]&&(e-=v[n][1],t.push(v[n][0]));return y[e]&&t.push(y[e]),t},O=function(e){e>1e21&&(e=m(e));var t=[];e<0&&(t.push("negative"),e=Math.abs(e));for(var n=function(e){var t=e,n=[];return x.forEach((function(i){if(e>=i[0]){var r=Math.floor(t/i[0]);t-=r*i[0],r&&n.push({unit:i[1],count:r})}})),n}(e),i=0;i<n.length;i++){var r=n[i].unit;"one"===r&&(r="",t.length>1&&t.push("and")),(t=t.concat(g(n[i].count))).push(r)}return 0===(t=(t=t.concat(function(e){var t=["zero","one","two","three","four","five","six","seven","eight","nine"],n=[],i=m(e).match(/\.([0-9]+)/);if(!i||!i[0])return n;n.push("point");for(var r=i[0].split(""),u=0;u<r.length;u++)n.push(t[r[u]]);return n}(e))).filter((function(e){return e}))).length&&(t[0]=""),t.join(" ")},w=function(e){if(!e&&0!==e)return null;var t=e%100;if(t>10&&t<20)return String(e)+"th";var n={0:"th",1:"st",2:"nd",3:"rd"},i=m(e),r=i.slice(i.length-1,i.length);return i+=n[r]?n[r]:"th"},b={one:"first",two:"second",three:"third",five:"fifth",eight:"eighth",nine:"ninth",twelve:"twelfth",twenty:"twentieth",thirty:"thirtieth",forty:"fortieth",fourty:"fourtieth",fifty:"fiftieth",sixty:"sixtieth",seventy:"seventieth",eighty:"eightieth",ninety:"ninetieth"},P=function(e){var t=O(e).split(" "),n=t[t.length-1];return b.hasOwnProperty(n)?t[t.length-1]=b[n]:t[t.length-1]=n.replace(/y$/,"i")+"th",t.join(" ")},V={"¢":"cents",$:"dollars","£":"pounds","¥":"yen","€":"euros","₡":"colón","฿":"baht","₭":"kip","₩":"won","₹":"rupees","₽":"ruble","₺":"liras"},C={"%":"percent",s:"seconds",cm:"centimetres",km:"kilometres"},$={usd:!0,eur:!0,jpy:!0,gbp:!0,cad:!0,aud:!0,chf:!0,cny:!0,hkd:!0,nzd:!0,kr:!0,rub:!0},j=function(e){return V.hasOwnProperty(e.prefix)&&(e.suffix+=V[e.prefix],e.prefix=""),C.hasOwnProperty(e.suffix)&&(e.suffix=C[e.suffix]),$.hasOwnProperty(e.suffix)&&(e.suffix=e.suffix.toUpperCase()),e.suffix&&(e.suffix=" "+e.suffix),e},E=function(e,t,n){var i=String(e.num);return t?(e=j(e),n?(i=P(i),"".concat(e.prefix||"").concat(i).concat(e.suffix||"")):(i=O(i),"".concat(e.prefix||"").concat(i).concat(e.suffix||""))):n?(i=w(i),e=j(e),"".concat(e.prefix||"").concat(i).concat(e.suffix||"")):(i=m(i),"".concat(e.prefix||"").concat(i).concat(e.suffix||""))},q={json:function(e){var t=null;"number"==typeof e&&(t=e,e=null),e=e||{text:!0,normal:!0,trim:!0,terms:!0};var n=[];return this.forEach((function(t){var i=t.json(e)[0],r=d(t);i.prefix=r.prefix,i.number=r.num,i.suffix=r.suffix,i.cardinal=E(r,!1,!1),i.ordinal=E(r,!1,!0),i.textCardinal=E(r,!0,!1),i.textOrdinal=E(r,!0,!0),n.push(i)})),null!==t?n[t]:n},isOrdinal:function(){return this.if("#Ordinal")},isCardinal:function(){return this.if("#Cardinal")},toNumber:function(){return this.forEach((function(e){var t=d(e);if(null!==t.num){var n=E(t,!1,e.has("#Ordinal"));e.replaceWith(n)}})),this},toLocaleString:function(){return this.forEach((function(e){var t=d(e);if(null!==t.num){t.num=t.num.toLocaleString();var n=E(t,!1,e.has("#Ordinal"));e.replaceWith(n)}})),this},toText:function(){return this.forEach((function(e){var t=d(e);if(null!==t.num){var n=E(t,!0,e.has("#Ordinal"));e.replaceWith(n)}})),this},toCardinal:function(){return this.if("#Ordinal").forEach((function(e){var t=d(e);if(null!==t.num){var n=E(t,e.has("#TextValue"),!1);e.replaceWith(n)}})),this},toOrdinal:function(){return this.if("#Cardinal").forEach((function(e){var t=d(e);if(null!==t.num){var n=E(t,e.has("#TextValue"),!0);e.replaceWith(n)}})),this},isEqual:function(e){return this.filter((function(t){return d(t).num===e}))},greaterThan:function(e){return this.filter((function(t){return d(t).num>e}))},lessThan:function(e){return this.filter((function(t){return d(t).num<e}))},between:function(e,t){return this.filter((function(n){var i=d(n).num;return i>e&&i<t}))},add:function(e){return e?(this.forEach((function(t){var n=d(t);if(null!==n.num){n.num+=e;var i=E(n,t.has("#TextValue"),t.has("#Ordinal"));t.replaceWith(i)}})),this):this},subtract:function(e){return this.add(-1*e)},increment:function(){return this.add(1),this},decrement:function(){return this.add(-1),this}};q.toNice=q.toLocaleString,q.minus=q.subtract,q.plus=q.add,q.equals=q.isEqual;var N=q,T=function(e){e.match("(hundred|thousand|million|billion|trillion|quadrillion|quintillion|sextillion|septillion)").tag("#Multiple"),e.match("the [/[0-9]+s$/]").tag("#Plural")};return function(i,u){u.postProcess(T);var o=function(i){function r(t,i,u){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(o=n(this,e(r).call(this,t,i,u))).unit=o.match("#Unit+$");var l=o.not("#Unit+$");return o.list=l.list,o}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(r,i),r}(i);return Object.assign(o.prototype,N),o.prototype.plus=o.prototype.add,o.prototype.minus=o.prototype.subtract,i.prototype.numbers=function(e){var t=r(this,e);return new o(t.list,this,this.world)},i.prototype.values=i.prototype.numbers,i}}));
