!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).nlp=e()}(this,(function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var i=function(t){return!0===t.has("#Plural")||!0!==t.has("(#Pronoun|#Place|#Value|#Person|#Uncountable|#Month|#WeekDay|#Holiday|#Possessive)")},o={hour:"an",heir:"an",heirloom:"an",honest:"an",honour:"an",honor:"an",uber:"an"},u={a:!0,e:!0,f:!0,h:!0,i:!0,l:!0,m:!0,n:!0,o:!0,r:!0,s:!0,x:!0},s=[/^onc?e/i,/^u[bcfhjkqrstn][aeiou]/i,/^eul/i],a=function(t){if(t.has("#Person")||t.has("#Place"))return"";if(t.has("#Plural"))return"the";var e=t.text("normal").trim();if(o.hasOwnProperty(e))return o[e];var r=e.substr(0,1);if(t.has("^@isAcronym")&&u.hasOwnProperty(r))return"an";for(var n=0;n<s.length;n++)if(s[n].test(e))return"a";return/^[aeiou]/i.test(e)?"an":"a"},l={isSingular:[/(ax|test)is$/i,/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,/(octop|vir)i$/i,/(rl)f$/i,/(alias|status)$/i,/(bu)s$/i,/(al|ad|at|er|et|ed|ad)o$/i,/(ti)um$/i,/(ti)a$/i,/sis$/i,/(?:(^f)fe|(lr)f)$/i,/hive$/i,/(^aeiouy|qu)y$/i,/(x|ch|ss|sh|z)$/i,/(matr|vert|ind|cort)(ix|ex)$/i,/(m|l)ouse$/i,/(m|l)ice$/i,/(antenn|formul|nebul|vertebr|vit)a$/i,/.sis$/i,/^(?!talis|.*hu)(.*)man$/i],isPlural:[/(antenn|formul|nebul|vertebr|vit)ae$/i,/(octop|vir|radi|nucle|fung|cact|stimul)i$/i,/men$/i,/.tia$/i,/(m|l)ice$/i]},f=/s$/,c=function(t){return!l.isSingular.find((function(e){return e.test(t)}))&&(!0===f.test(t)||(!!l.isPlural.find((function(e){return e.test(t)}))||null))},h={he:"his",she:"hers",they:"theirs",we:"ours",i:"mine",you:"yours",her:"hers",their:"theirs",our:"ours",my:"mine",your:"yours"},v=function(t){var e=t.text("text").trim();return h.hasOwnProperty(e)?(t.replaceWith(h[e]),void t.tag("Possessive","toPossessive")):/s$/.test(e)?(e+="'",t.replaceWith(e),void t.tag("Possessive","toPossessive")):(e+="'s",t.replaceWith(e),void t.tag("Possessive","toPossessive"))},p=function(t){var e={main:t};if(t.has("#Noun (of|by|for) .")){var r=t.splitAfter("[#Noun+]");e.main=r.eq(0),e.post=r.eq(1)}return e};return function(o){var u=function(o){function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n(this,e(u).apply(this,arguments))}var s,l,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(u,o),s=u,(l=[{key:"json",value:function(t){t=t||{text:!0,normal:!0,trim:!0,terms:!0};var e=[];return this.forEach((function(r){var n=r.json(t)[0];n.article=a(r),e.push(n)})),e}},{key:"isPlural",value:function(){return this.if("#Plural")}},{key:"hasPlural",value:function(){return this.filter((function(t){return i(t)}))}},{key:"toPlural",value:function(){var t=this,e=this.world.transforms.toPlural;return this.forEach((function(r){if(!r.has("#Plural")&&!1!==i(r)){var n=p(r).main,o=n.text();(n.has("#Singular")||!0!==c(o))&&(o=e(o,t.world),n.replace(o).tag("#Plural"))}})),this}},{key:"toSingular",value:function(){var t=this,e=this.world.transforms.toSingular;return this.forEach((function(r){if(!r.has("#Singular")&&!1!==i(r)){var n=p(r).main,o=n.text();(n.has("#Plural")||!0===c(o))&&(o=e(o,t.world),n.replace(o).tag("#Singular"))}})),this}},{key:"toPossessive",value:function(){return this.forEach((function(t){v(t)})),this}}])&&t(s.prototype,l),f&&t(s,f),u}(o);return o.prototype.nouns=function(t){var e=this.clauses();return e=(e=(e=(e=(e=(e=e.match("#Noun+ (of|by)? the? #Noun+?")).not("#Pronoun")).not("(there|these)")).not("(#Month|#WeekDay)")).not("(my|our|your|their|her|his)")).not("(of|for|by|the)$"),"number"==typeof t&&(e=e.get(t)),new u(e.list,this,this.world)},o}}));
